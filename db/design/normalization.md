## 목차

1. [논리적 설계](#논리적-설계)
2. [규칙](#규칙)
3. [복합 및 유도 속성](#복합-및-유도-속성)
4. [일반화 관계](#일반화-관계)
5. [테이블 명세서 작성](#테이블-명세서-작성)
6. [References](#references)

## 이상 현상
불필요한 데이터 중복으로 인해 릴레이션에 대한 데이터 삽입·수정·삭제 연산을 수행할 때 발생할 수 있는 부작용을 의미한다. 속성 사이의 많은 연관 관계를 무리하게 하나의 릴레이션으로 표현할 때 발생한다. \
SELECT문으로 검색할 경우는 아무런 이상 현상이 발생하지 않는다. 데이터가 중복되더라도 검색은 가능하기 때문이다. 하지만 INSERT, UPDATE, DELETE문으로 데이터를 변경할 때는 3가지 이상 현상이 발생한다.

+ 삽입 이상: 새 데이터를 삽입하기 위해 불필요한 데이터도 함께 삽입해야 하는 문제이다.
+ 갱신 이상: 중복 투플 중 일부만 변경하여 데이터가 불일치하게 되는 모순의 문제이다. 
+ 삭제 이상: 투플을 삭제하면 꼭 필요한 데이터까지 함계 삭제되는 데이터 손실의 문제이다.

이상 현상을 방지하기 위해서 속성 사이의 연관 관계, 즉 종속성을 분석하여 하나의 릴레이션에는 하나의 종속성만 표현하도록 릴레이션을 분해하면 된다. 릴레이션 속성 사이의 연관성을 평가하기 위한 척도로 함수 종속성을 활용한다.

## 함수 종속
"X가 Y를 함수적으로 결정한다.", 릴레이션 내의 모든 투플에서 하나의 X 값에 대한 Y 값이 항상 하나이다. X와 Y는 하나의 릴레이션을 구성하는 속성들의 부분 집합이고, X는 결정자, Y는 종속자라고 한다. X -> Y로 표현한다. 

### 유의 사항
+ 속성 자체의 특성과 의미를 기반으로 함수 종속성을 판단해야 한다.
+ 속성 값은 계속 변할 수 있으므로 현재 릴레이션에 포함된 속성 값만으로
판단하면 안 된다.
+ 일반적으로 기본키와 후보키는 릴레이션의 다른 모든 속성들을 함수적으로 결정한다.
+ 기본키나 후보키가 아니어도 다른 속성 값을 유일하게 결정하는 속성은 함수 종속 관계에서 결정자가 될 수 있다.
+ 결정자와 종속자가 같거나, 결정자가 종속자를 포함하는 것처럼 당연한 함수 종속 관계는 고려하지 않는다.

### 완전 함수 종속
FFD, Full Functional Dependecny. 릴레이션에서 속성 집합 Y가 속성 집합 X에 함수적으로 종속되어 있지만, 속성 집합 X의 전체가 아닌 일부분에는 종속되지 않음을 의미한다. 일반적으로 함수 종속은 완전 함수 종속을 의미한다.

### 부분 함수 종속
PFD, Partial Functional Dependecny. 릴레이션에서 속성 집합 Y가 속성 집합 X의 전체가 아닌 일부분에도 함수적으로 종속됨을 의미한다.

## 정규화
데이터베이스 설계 과정에서 발생하는 이상 현상을 제거하면서 올바르게 설계해 나가는 과정이다. 함수적 종속성(FD; Functional Dependency)을 판단하여 정규화를 수행한다.

### 주의 사항
+ 정규화를 통해 릴레이션은 무손실 분해(nonloss decomposition)되어야 한다.
+ 릴레이션이 의미상 동등한 릴레이션들로 분해되어야 하고, 분해로 인한 정보 손실이 발생하지 않아야 한다.
+ 분해된 릴레이션들을 자연 조인하면 분해 전의 릴레이션으로 복원 가능해야 한다.

## 정규형
NF; Normal Form. 릴레이션이 정규화된 정도이다. 각 정규형마다 제약조건이 존재하며, 정규형의 차수가 높아질수록 요구되는 제약조건이 많아지고 엄격해진다. 보통 3NF ~ BCNF까지를 사용한다. 왜냐하면 모든 릴레이션이 제 4, 5 정규형에 속해야만 바람직한 것은 아니다.

<details><summary> 단계별 정규형 </summary>

### 제 1 정규형
1NF, 릴레이션의 모든 속성이 더는 분해되지 않는 원자 값(atomic value)만 가지면 제 1 정규형을 만족한다. 1NF를 만족해야 관계 데이터베이스의 릴레이션이 될 자격이 있다. \
제1 정규형은 만족하지만 이상현상이 발생하는 것은 기본키에 완전 함수 종속되지 못하고 일부분에 종속되는 속성이 존재하기 때문이다. 따라서 부분 함수 종속이 제거되도록 릴레이션을 분해한다. 분해된 릴레이션들은 제 2 정규형에 속하게 됨

### 제 2 정규형
2NF, 릴레이션이 제 1 정규형에 속하고, 기본키가 아닌 모든 속성이 기본키에 완전 함수 종속되면 제 2 정규형을 만족한다. 2NF를 만족시키기 위해서, 릴레이션의 부분 함수 종속을 제거하고 모든 속성이 기본키에 완전 함수 종속되도록 분해한다. \
제2 정규형은 만족하지만 이상현상이 발생하는 것은 이행적 함수 종속이 존재하기 때문이다. 따라서 이행적 함수 종속이 제거되도록 고객 릴레이션을 분해한다. 분해된 릴레이션들은 제 3 정규형에 속하게 된다.
+ 이행적 함수 종속
    + 릴레이션을 구성하는 3개의 속성 집합 X, Y, Z에 대해 함수 종속 관계 X → Y와 Y → Z가 존재하면 논리적으로 X → Z가 성립되는데, 이때 Z가 X에 이행적으로 함수 종속되었다고 한다.

### 제 3 정규형
릴레이션이 제 2 정규형에 속하고, 기본키가 아닌 모든 속성이 기본키에 이행적 함수 종속이 되지 않으면 제 3 정규형을 만족한다. 

### 보이스/코드 정규형
BCNF, Boyce/Codd Normal Form, strong 3CNF. 하나의 릴레이션에 여러 개의 후보키가 존재하는 경우, 제 3 정규형까지 모두 만족해도 이상 현상이 발생할 수 있다. 따라서 후보키를 여러 개 가지고 있는 릴레이션에 발생할 수 있는 이상 현상을 해결하기 위해서, 제 3 정규형보다 좀 더 엄격한 제약 조건을 제시한다. 릴레이션의 함수 종속 관계에서 모든 결정자가 후보키이면 BCNF에 속한다.

### 제 4 정규형
릴레이션이 보이스/코드 정규형을 만족하면서, 함수 종속이 아닌 다치
종속(MVD; Multi Valued Dependency)을 제거하면 제 4 정규형에 속한다.

### 제 5 정규형
릴레이션이 제 4 정규형을 만족하면서, 후보키를 통하지 않는 조인 종속 (JD; Join Dependency)을 제거하면 제 5 정규형에 속한다.

</details>