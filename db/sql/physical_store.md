## 목차

1. [데이터베이스의 물리적 저장](#데이터베이스의-물리적-저장)
2. [SQL Server의 주요 파일](#sql-server의-주요-파일)
3. [인덱스](#인덱스)
4. [References](#references)

## 데이터베이스의 물리적 저장
실제로 데이터가 저장되는 곳은 보조기억장치이며, 가장 많이 사용되는 장치는 하드디스크이다. 하드디스크에 저장된 데이터를 읽어오는데 걸리는 시간은 다음에 영향을 받는다.

+ 모터에 의해서 분당 회전하는 속도(RPM)
+ 데이터를 읽을 때 액세스 암이 이동하는 시간(Latency time)
+ 주기억장치로 읽어오는 시간(Transfer time)

액세스 시간 = 탐색 시간 + 회전 지연 시간 + 데이터 전송 시간
+ 탐색 시간: 액세스 헤드를 트랙에 이동시키는 시간
+ 회전 지연 시간: 섹터가 액세스 헤드에 접근하는 시간
+ 데이터 전송 시간: 데이터를 주기억장치로 읽어오는 시간

## SQL Server의 주요 파일

### 데이터 파일
+ 주 데이터 파일: 데이터베이스의 시작 정보를 포함하며 데이터베이스의 나머지 파일을 가리킨다.
    + 사용자 데이터와 개체를 저장한다.
    + 모든 데이터베이스에는 하나의 주 데이터 파일이 있으며 파일 확장명은 .mdf이다.
+ 보조 데이터 파일: 선택적으로 사용하는 사용자 정의 데이터 파일이며 사용자 데이터를 저장한다.
    + 권장되는 확장명은 .ndf이다.

### 트랜잭션 로그 파일
데이터베이스 복구에 사용되는 로그 정보를 저장한다. 데이터베이스마다 최소 하나의 로그 파일이 있어야 한다. 권장되는 확장명은 .ldf이다.

## 인덱스
테이블 안의 데이터를 쉽고 빠르게 찾을 수 있도록 만든 데이터베이스 객체이다. SQL를 실행할 때, 디스크 접근 횟수를 줄여 검색 속도를 높이기 위함이다. \
질의 검색 시, data block을 읽는 횟수를 최소화할 필요가 있다. 왜냐하면 disk에 있는 데이터는 memory에 있는 데이터에 비하여 읽어들이는 속도가 10000배 정도 소요되기 때문이다. (전기신호 vs 자성체)

+ 대부분의 DBMS는 B-트리 구조의 인덱스를 지원한다. 
    + 루트 노드로부터 리프 노드까지의 탐색 길이가 같아서 모든 데이터에 대한 일정 수준의 검색 시간을 보장하기 때문이다.
+ 클러스터드 인덱스와 비클러스터드 인덱스가 있다.

### 특징
+ 인덱스는 테이블에서 한 개 이상의 속성을 이용하여 생성한다.
+ 빠른 검색과 함께 효율적인 레코드 접근이 가능하다.
+ 순서대로 정렬된 속성과 데이터의 위치만 보유하므로, 테이블보다 작은 공간을 차지한다.
+ 저장된 값들은 테이블의 부분집합이 된다.
+ 일반적으로 B-tree 형태의 구조를 가진다.
+ 데이터의 수정, 삭제 등의 변경이 필요하면 인덱스의 재구성이 필요하다.

### 고려사항
+ 인덱스는 WHERE 절에 자주 사용되는 속성이어야 한다.
+ 인덱스는 조인에 자주 사용되는 속성이어야 한다.
+ 단일 테이블에 인덱스가 많으면 속도가 느려질 수 있다.(테이블 당 4~5개 정도 권장).
+ 속성이 가공되는 경우 사용하지 않다.
+ 속성의 선택도가 낮을 때 유리하다(속성의 모든 값이 다른 경우).

=> 주로 기본키나 외래키를 사용한다.

### 문법

    CREATE [REVERSE] [UNIQUE] [CLUSTERED | NONCLUSTERED] INDEX 인덱스이름 ON 테이블이름 (속성이름 [ASC | DESC] [,...n]);


## References
* 2022 봄 데이터베이스 강의