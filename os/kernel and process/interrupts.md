## 목차

1. [Interrupts란?](#interrupts란?)
2. [역할](#역할)
3. [목적](#목적)
4. [References](#references)

## Interrupts란?
CPU가 프로그램을 실행하고 있을 때, I/O 하드웨어 등의 장치에 예외 상황이 발생하여 처리가 필요할 경우에 CPU에게 알려 처리할 수 있도록 하는 것을 말한다. \
대부분의 컴퓨터는 한 개의 CPU를 사용하므로 한 순간에는 하나의 일 밖에 처리할 수 없다. 어떤 일을 처리하던 도중, 우선 순위가 급한 일을 처리할 필요가 있을 때의 대처 방안이다.

## Polling
CPU가 일정한 시간 간격을 두고 각 자원들의 상태를 주기적으로 확인하는 방식이다. 자원들은 폴링 신호를 받은 후에 자신의 상태를 CPU에게 알려준다. 동시에 각 자원들은 직전 폴링 이후 변화된 자신의 상태를 다음 폴링 때까지는 알릴 수 없다. 운영체제와 하드웨어장치 간에 폴링을 통한 상호동작은 다음과 같다.
1. 폴링을 한다.
2. 운영체제가 데이터레지스터에 데이터를 전달한다.
3. 운영체제가 명령레지스터에 명령을 기록한다.
4. 운영체제는 하드웨어 장치가 특정 동작을 처리하였는지 폴링 반복문을 돌면서 기다린다. (성공 / 실패 코드를 받는다.)

폴링을 하는 동안에는 다른 프로세스에게 CPU를 양도하지 않는다. 하드웨어 장치가 동작을 완료하는 동안 계속 루프를 돌면서 하드웨어의 상태를 체크한다. 하지만 하드웨어 장치의 속도는 CPU에 비해 매우 느리기 때문에, CPU를 양도하지 않고 하드웨어 장치의 상태를 계속 확인하는 것은 CPU를 많이 낭비하게 된다.

## 우선순위
동시에 여러 개의 인터럽트가 발생할 때, 우선 순위를 정해 순차적으로 처리한다.
1. 전원 공급의 이상
2. CPU의 기계적인 오류
3. 외부 신호에 의한 인터럽트
4. 입출력 전송 요청 및 전송 완료, 전송 오류
5. 프로그램 검사 인터럽트
6. 수퍼바이저 호출(SVC 인터럽트)

## 서비스 루틴
다음은 위키백과에서 가져왔습니다.
인터럽트 원천인 하드웨어에서 또는 예외상황이 발생하거나 소프트웨어 인터럽트가 걸리면:

1. 현재 진행 중인 기계어 코드를 완료한다.
2. CPU의 특수레지스터 중, 하이로인터럽트 마스크 비트를 보고 마스크 되면 인터럽트 무시 한다.
3. 인터럽트 벡터를 읽고
4. ISR 주소값을 얻는다.
5. ISR로 점프 한다. 이때 PC(Program Counter, IP) 값은 자동 대피 저장된다.
6. 현재 진행중인 프로그램의 레지스터를 대피한다.
7. 해당 코드를 실행한다.
8. 해당 일을 다 처리하면, 대피시킨 레지스터를 복원한다.
9. ISR의 끝에 IRET 명령어에 의해 인터럽트가 해제 된다.
10. IRET 명령어가 실행되면, 대피시킨 PC 값을 복원하여 이전 실행 위치로 복원한다.

## 용어
* PC: Program Counter, IP. 마이크로프로세서 내부에 있는 레지스터 중의 하나. 다음에 실행될 명령어 주소를 가지고 있어 실행할 기계어 코드의 위치를 지정한다. 명령어 포인터라고도 한다.
* ISR: Interrupt Service Routine, interrupt handler. 인터럽트에 대응하여 특정 기능을 처리하는 기계어 코드 루틴이다. 인터럽트 원인에 따라 각각 존재한다.

## References
* wiki - https://ko.wikipedia.org/wiki/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8
* 폴링 / 인터럽트 / DMA - https://jaebworld.tistory.com/27
* 인터럽트와 폴링 - https://itdexter.tistory.com/388